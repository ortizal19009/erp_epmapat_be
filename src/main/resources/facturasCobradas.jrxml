<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.21.2.final using JasperReports Library version 6.21.2-8434a0bd7c3bbc37cbf916f2968d35e4b165821a  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="facturasCobradas" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="86550c9f-a7b5-46cc-8eee-bd5eda20a360">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Erp_epmapat"/>
	<subDataset name="TotalFacturas" uuid="25299ff7-7d37-4288-9769-c01de2136ede">
		<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
		<property name="com.jaspersoft.studio.data.defaultdataadapter" value="Erp_epmapat"/>
		<parameter name="v_fechaCobro" class="java.util.Date"/>
		<queryString language="SQL">
			<![CDATA[select f.nrofactura, sum(rf.valorunitario * rf.cantidad) as tutal, f.swiva from rubroxfac rf join facturas f on rf.idfactura_facturas = f.idfactura join rubros r on rf.idrubro_rubros = r.idrubro where f.fechacobro = '2024-04-04' and (f.estado = 1 or f.estado = 2 ) and f.fechaeliminacion is null and f.fechaanulacion is null group by f.idfactura , f.nrofactura order by f.nrofactura asc]]>
		</queryString>
		<field name="nrofactura" class="java.lang.String">
			<property name="com.jaspersoft.studio.field.name" value="nrofactura"/>
			<property name="com.jaspersoft.studio.field.label" value="nrofactura"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="facturas"/>
		</field>
		<field name="tutal" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.name" value="tutal"/>
			<property name="com.jaspersoft.studio.field.label" value="tutal"/>
		</field>
		<field name="swiva" class="java.lang.Double">
			<property name="com.jaspersoft.studio.field.name" value="swiva"/>
			<property name="com.jaspersoft.studio.field.label" value="swiva"/>
			<property name="com.jaspersoft.studio.field.tree.path" value="facturas"/>
		</field>
	</subDataset>
	<parameter name="v_dfecha" class="java.util.Date"/>
	<parameter name="v_hfecha" class="java.util.Date"/>
	<queryString language="SQL">
		<![CDATA[SELECT f.nrofactura,c.nombre,
	sum( rf.valorunitario * rf.cantidad) AS total,
	f.swiva
FROM rubroxfac rf
	join facturas f ON 
	 rf.idfactura_facturas = f.idfactura 
	join rubros r ON 
	 rf.idrubro_rubros = r.idrubro 
	 join clientes c ON 
	 f.idcliente = c.idcliente
WHERE 
	 date(f.fechacobro) BETWEEN $P{v_dfecha} AND $P{v_hfecha} 
	 AND ( 
	 f.estado = 1 
	 OR f.estado = 2) 
	 AND f.fechaeliminacion IS NULL  
	 AND f.fechaanulacion IS NULL  
GROUP BY f.idfactura,
	f.nrofactura, c.nombre
ORDER BY f.nrofactura ASC]]>
	</queryString>
	<field name="nrofactura" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="nrofactura"/>
		<property name="com.jaspersoft.studio.field.label" value="nrofactura"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="facturas"/>
	</field>
	<field name="nombre" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="nombre"/>
		<property name="com.jaspersoft.studio.field.label" value="nombre"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="clientes"/>
	</field>
	<field name="total" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.name" value="total"/>
		<property name="com.jaspersoft.studio.field.label" value="total"/>
	</field>
	<field name="swiva" class="java.lang.Double">
		<property name="com.jaspersoft.studio.field.name" value="swiva"/>
		<property name="com.jaspersoft.studio.field.label" value="swiva"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="facturas"/>
	</field>
	<variable name="sumaTotal" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{total}+$F{swiva}]]></variableExpression>
	</variable>
	<variable name="nFacturas" class="java.lang.Long" incrementType="Report" calculation="Count">
		<variableExpression><![CDATA[0]]></variableExpression>
	</variable>
	<background>
		<band/>
	</background>
	<title>
		<band height="72">
			<frame>
				<reportElement mode="Opaque" x="-20" y="-20" width="595" height="92" backcolor="#006699" uuid="5f5aee5f-e17c-43c8-a411-936412766852"/>
				<staticText>
					<reportElement x="20" y="20" width="320" height="43" forecolor="#FFFFFF" uuid="fd36fa0e-62f1-409a-a054-b9e2fd608fa8"/>
					<textElement>
						<font size="34" isBold="true"/>
					</textElement>
					<text><![CDATA[Facturas Cobradas]]></text>
				</staticText>
				<textField>
					<reportElement x="250" y="63" width="170" height="30" forecolor="#FFFFFF" uuid="86c59371-cd31-4948-9515-0aa1515d584c"/>
					<textElement textAlignment="Center">
						<font size="14"/>
					</textElement>
					<textFieldExpression><![CDATA[$P{v_dfecha}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="420" y="63" width="170" height="30" forecolor="#FFFFFF" uuid="4de11d77-3e4b-44d2-afcd-938892233436"/>
					<textElement textAlignment="Center">
						<font size="14"/>
					</textElement>
					<textFieldExpression><![CDATA[$P{v_hfecha}]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</title>
	<pageHeader>
		<band height="13"/>
	</pageHeader>
	<columnHeader>
		<band height="27">
			<staticText>
				<reportElement x="20" y="1" width="100" height="21" uuid="6285ac5a-28b0-4734-96ea-7a549ee70cc9">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="65c6cb24-a663-4b87-9e0f-368aa2c8221a"/>
				</reportElement>
				<text><![CDATA[NÂ° Factura]]></text>
			</staticText>
			<staticText>
				<reportElement x="380" y="3" width="100" height="21" uuid="f73727c3-9215-4ded-b866-ffe87eff2c60">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="65c6cb24-a663-4b87-9e0f-368aa2c8221a"/>
				</reportElement>
				<text><![CDATA[Valor]]></text>
			</staticText>
			<staticText>
				<reportElement x="162" y="0" width="100" height="27" uuid="6af9e990-12de-4405-941d-8ba5344884ed">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="0186fa8f-dff3-4c73-8140-25d514db8240"/>
				</reportElement>
				<text><![CDATA[nombre]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="18">
			<textField>
				<reportElement x="380" y="2" width="120" height="13" uuid="8924b995-c47d-4a8a-8dbd-ab21142a9666">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="e1c777b2-c2fc-465c-b578-7d5cf6b3d8f9"/>
				</reportElement>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[new java.text.DecimalFormat("$ #,##0.00").format($F{total}+$F{swiva})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="20" y="1" width="100" height="13" uuid="09a164c1-d389-4ae9-b94e-4d117bf8603d">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="65c6cb24-a663-4b87-9e0f-368aa2c8221a"/>
				</reportElement>
				<box>
					<topPen lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textFieldExpression><![CDATA[$F{nrofactura}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="-10" y="-1" width="20" height="15" uuid="5cb85c2a-dfb1-4792-b8a5-efa593d56866"/>
				<textFieldExpression><![CDATA[$V{nFacturas}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="140" y="-1" width="200" height="16" uuid="d78d4bf2-6553-41e7-8585-99505b817d57">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="0186fa8f-dff3-4c73-8140-25d514db8240"/>
				</reportElement>
				<textFieldExpression><![CDATA[$F{nombre}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band height="21">
			<textField>
				<reportElement mode="Opaque" x="0" y="4" width="515" height="13" backcolor="#E6E6E6" uuid="3cc78525-9c46-4b22-be04-d1d30f5cf107"/>
				<textElement textAlignment="Right"/>
				<textFieldExpression><![CDATA["Page "+$V{PAGE_NUMBER}+" of"]]></textFieldExpression>
			</textField>
			<textField evaluationTime="Report">
				<reportElement mode="Opaque" x="515" y="4" width="40" height="13" backcolor="#E6E6E6" uuid="949864c6-5c2b-46e4-9576-88d928581fee"/>
				<textFieldExpression><![CDATA[" " + $V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
			<textField pattern="EEEEE dd MMMMM yyyy">
				<reportElement x="0" y="4" width="100" height="13" uuid="494e6c6a-6434-48de-adca-c4ee6662886d"/>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="50">
			<staticText>
				<reportElement x="90" y="-1" width="100" height="13" uuid="3f1f8ac1-5c35-41ee-9de5-12a11954d4f5"/>
				<box leftPadding="10"/>
				<textElement>
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<textField>
				<reportElement x="330" y="0" width="158" height="20" uuid="f57fdbd7-089b-41da-ac61-f380b4268baf"/>
				<textFieldExpression><![CDATA[new java.text.DecimalFormat("$ #,##0.00").format($V{sumaTotal})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="200" y="-2" width="100" height="15" uuid="eab9120b-c1c6-484c-9c53-d22422fd1abe"/>
				<textFieldExpression><![CDATA[$V{nFacturas}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
